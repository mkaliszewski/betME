(this["webpackJsonpbet-me"]=this["webpackJsonpbet-me"]||[]).push([[0],{150:function(e,t,n){"use strict";n.r(t);var a,c,r,i,s=n(0),o=n.n(s),l=n(34),j=n.n(l),u=n(45),b=n(43),d=n(94),h=n(39),p=n(77),O=n(95),x=n(14),f=n(3),v=n(96),g=n.n(v);!function(e){e.SET_STATUS="SET_STATUS",e.SET_RACES="SET_RACES",e.SET_RACE="SET_RACE",e.SET_ACTIVE_PARTICIPANTS="SET_ACTIVE_PARTICIPANTS",e.SET_BET_VALUE="SET_BET_VALUE",e.SET_BETS="SET_BETS",e.CLEAR_RACE_INFO="CLEAR_RACE_INFO",e.FETCH_START="FETCH_START",e.FETCH_SUCCESS="FETCH_SUCCESS",e.FETCH_FAILURE="FETCH_FAILURE"}(a||(a={})),function(e){e.First="first",e.Second="second",e.Third="third"}(c||(c={})),function(e){e.Any="Any",e.Active="Active",e.Inactive="Inactive"}(r||(r={}));var m,E={status:r.Any,races:[],race:void 0,activeParticipants:[],filtredRaces:[],betValue:"0",bets:(i={},Object(f.a)(i,c.First,null),Object(f.a)(i,c.Second,null),Object(f.a)(i,c.Third,null),i),isLoading:!0,isError:!1},y={key:"root",storage:g.a},T=Object(p.a)(y,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.SET_STATUS:return Object(x.a)(Object(x.a)({},e),{},{status:t.payload,filtredRaces:e.races.filter((function(e){return t.payload===r.Any?e:t.payload===r.Active?e.active:!e.active}))});case a.SET_RACES:return Object(x.a)(Object(x.a)({},e),{},{races:t.payload,filtredRaces:t.payload.filter((function(t){return e.status===r.Any?t:e.status===r.Active?t.active:!t.active}))});case a.SET_RACE:return Object(x.a)(Object(x.a)({},e),{},{race:t.payload});case a.SET_ACTIVE_PARTICIPANTS:return Object(x.a)(Object(x.a)({},e),{},{activeParticipants:t.payload});case a.SET_BET_VALUE:var n=t.payload.startsWith("-")||"0"!==t.payload&&t.payload.startsWith("0");return Object(x.a)(Object(x.a)({},e),{},{betValue:n?e.betValue:t.payload});case a.SET_BETS:var c=t.payload,i=c.place,s=c.participantId,o=Object.values(e.bets).includes(s);if(o){var l,j=Object.keys(e.bets).find((function(t){return e.bets[t]===s}));return Object(x.a)(Object(x.a)({},e),{},{bets:Object(x.a)(Object(x.a)({},e.bets),{},(l={},Object(f.a)(l,i,s),Object(f.a)(l,j,null),l))})}return Object(x.a)(Object(x.a)({},e),{},{bets:Object(x.a)(Object(x.a)({},e.bets),{},Object(f.a)({},i,s))});case a.CLEAR_RACE_INFO:return Object(x.a)(Object(x.a)({},e),{},{race:E.race,activeParticipants:E.activeParticipants,betValue:E.betValue,bets:E.bets});case a.FETCH_START:return Object(x.a)(Object(x.a)({},e),{},{isLoading:!0,isError:!1});case a.FETCH_SUCCESS:return Object(x.a)(Object(x.a)({},e),{},{isLoading:!1});case a.FETCH_FAILURE:return Object(x.a)(Object(x.a)({},e),{},{isLoading:!1,isError:!0});default:return e}})),C=[O.a],S=Object(h.c)(T,h.a.apply(void 0,C)),A=Object(p.b)(S),_=n(13),R=n(60),k=n.n(R),I=n(85),w=function(e){return{type:a.SET_RACE,payload:e}},L=function(e){return{type:a.SET_ACTIVE_PARTICIPANTS,payload:e}},F=function(){return{type:a.FETCH_START}},P=function(){return{type:a.FETCH_SUCCESS}},V=function(){return{type:a.FETCH_FAILURE}},U=n(17),H=n(204),B=n(214),N=n(211),W=n(208),z=n(212),Y=n(205),D=n(4),M=n(215),$=n(1),J=Object(D.a)(N.a)({width:"100%",height:"calc(100vh - 160px)",display:"flex",justifyContent:"center",alignItems:"center"}),G=function(e){var t=e.isLoading,n=e.isError,a=e.children;return t?Object($.jsx)(J,{"data-testid":"spinner-container",children:Object($.jsx)(M.a,{color:"primary"})}):n?Object($.jsx)(J,{children:Object($.jsx)(z.a,{children:"Oooops... something went wrong. Try to refresh the page."})}):Object($.jsx)($.Fragment,{children:a})},q=n(209),K=function(e){return e.isActive?Object($.jsx)(q.a,{label:"Active",color:"success"}):Object($.jsx)(q.a,{label:"Inactive",color:"error"})},Q=n(219),X=n(222),Z=n(221),ee=n(217),te=n(220),ne=n(216),ae=n(218),ce=n(200),re=Object(D.a)(ne.a)((function(e){return{"&:hover":{cursor:"pointer",backgroundColor:e.theme.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}})),ie=function(e){var t=e.race,n=e.participants,a=e.bets,r=e.handleChange;return Object($.jsx)(ee.a,{component:ae.a,children:Object($.jsxs)(Q.a,{sx:{minWidth:400},"aria-label":"Race table",children:[Object($.jsx)(te.a,{children:Object($.jsxs)(ne.a,{children:[Object($.jsx)(Z.a,{children:"Participant name"}),Object($.jsx)(Z.a,{align:"center",children:"Winner"}),Object($.jsx)(Z.a,{align:"center",children:"2nd place"}),Object($.jsx)(Z.a,{align:"center",children:"3rd place"})]})}),Object($.jsx)(X.a,{children:n.map((function(e){var n=e.id,i=e.body;return Object($.jsxs)(re,{children:[Object($.jsx)(Z.a,{component:"th",scope:"row",children:i}),Object($.jsx)(Z.a,{align:"center",children:Object($.jsx)(ce.a,{checked:a.first===n,onChange:function(e){return r(e,c.First)},value:n,disabled:!t.active})}),Object($.jsx)(Z.a,{align:"center",children:Object($.jsx)(ce.a,{checked:a.second===n,onChange:function(e){return r(e,c.Second)},value:n,disabled:!t.active})}),Object($.jsx)(Z.a,{align:"center",children:Object($.jsx)(ce.a,{checked:a.third===n,onChange:function(e){return r(e,c.Third)},value:n,disabled:!t.active})})]},n)}))})]})})},se=n(213),oe=n(201),le=n(194),je=n(97),ue=n(195),be=[le.a[300],je.a[300],ue.a[300]],de=Object(D.a)(W.a)((function(e){var t=e.theme;return{width:"100%",marginTop:t.spacing(7),marginLeft:t.spacing(2),boxShadow:"0px 0px 18px 0px ".concat(je.a[300]),borderRadius:t.spacing(1)}})),he=Object(D.a)(W.a)((function(e){var t=e.theme;return{width:"100%",height:"fit-content",padding:t.spacing(2),borderRadius:"".concat(t.spacing(1)," ").concat(t.spacing(1)," 0 0"),display:"flex",justifyContent:"center",backgroundColor:t.palette.primary.main,color:t.palette.common.white}})),pe=Object(D.a)(W.a)({height:60,display:"flex",justifyContent:"center",alignItems:"center"}),Oe=Object(D.a)(W.a)({height:90,display:"flex",justifyContent:"center",alignItems:"center"}),xe=function(e){var t=e.betValue,n=e.bets,a=e.participants,c=e.isActive,r=e.isValueError,i=e.isSubmitted,o=e.handleButtonClick,l=Object(s.useState)([]),j=Object(_.a)(l,2),u=j[0],b=j[1];return Object(s.useEffect)((function(){var e=[];Object.values(n).forEach((function(t){var n=a.find((function(e){return e.id===t}));e.push(null===n||void 0===n?void 0:n.body)})),b(e)}),[n,a]),Object($.jsxs)(de,{container:!0,children:[Object($.jsx)(he,{item:!0,xs:12,justifyContent:"center",children:Object($.jsx)(z.a,{variant:"h4",children:"Your bet"})}),u.map((function(e,t){return Object($.jsx)(pe,{item:!0,xs:12,sx:{backgroundColor:be[t]},children:Object($.jsx)(z.a,{children:null!==e&&void 0!==e?e:"None"})})})),Object($.jsxs)(Oe,{item:!0,xs:4,sx:{flexDirection:"column"},children:[Object($.jsx)(z.a,{align:"center",children:"Your bet:"}),Object($.jsxs)(z.a,{variant:"h5",align:"center",sx:{wordBreak:"break-all"},children:["$",t]})]}),Object($.jsx)(Oe,{item:!0,xs:8,children:Object($.jsx)(se.a,{onClick:o,variant:"contained",size:"large",disabled:!c,children:"Place your bet!"})}),Object($.jsxs)(W.a,{xs:12,children:[i&&!r&&Object($.jsx)(oe.a,{severity:"success",children:"Your bet has been set"}),r&&Object($.jsx)(oe.a,{severity:"error",children:"To set bet place amount and select winner, 2nd place and 3rd place"}),!c&&Object($.jsx)(oe.a,{severity:"error",children:"Sorry, you can't place bet when race is inactive."})]})]})},fe=n.p+"static/media/background.4ce76570.jpg",ve=Object(D.a)(B.a)((function(e){var t=e.theme;return{height:"calc(100% - ".concat(200,"px)"),padding:"".concat(t.spacing(4)," 0")}})),ge=Object(D.a)(N.a)({width:"100%",height:200,display:"flex",justifyContent:"center",alignItems:"center",background:"rgba(0, 0, 0, 0.2) url(".concat(fe,")"),backgroundBlendMode:"darken",backgroundSize:"cover",backgroundPosition:"50% 20%"}),me=Object(D.a)(N.a)((function(e){var t=e.theme;return{width:600,height:120,display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center",backgroundColor:"rgba(0,0,0, 0.85)",color:t.palette.common.white,borderRadius:t.spacing(1)}})),Ee=function(){var e=Object(U.g)().id,t=Object(b.b)(),n=Object(b.c)((function(e){return{race:e.race,activeParticipants:e.activeParticipants,betValue:e.betValue,bets:e.bets,isLoading:e.isLoading,isError:e.isError}})),c=n.race,r=n.activeParticipants,i=n.betValue,o=n.bets,l=n.isLoading,j=n.isError,u=Object(s.useState)(!1),d=Object(_.a)(u,2),h=d[0],p=d[1],O=Object(s.useState)(!1),x=Object(_.a)(O,2),f=x[0],v=x[1];Object(s.useEffect)((function(){var n;return t((n=e,function(){var e=Object(I.a)(k.a.mark((function e(t){var a,c,r,i,s,o,l;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(F()),e.prev=1,e.next=4,Promise.all([fetch("https://my-json-server.typicode.com/hdjfye/bet-api/races/".concat(n)),fetch("https://my-json-server.typicode.com/hdjfye/bet-api/participants")]);case 4:if(a=e.sent,c=Object(_.a)(a,2),r=c[0],i=c[1],!r||!i){e.next=22;break}return e.next=11,r.json();case 11:return s=e.sent,e.next=14,i.json();case 14:o=e.sent,l=[],s.participants.forEach((function(e){o.forEach((function(t){t.id===e&&l.push(t)}))})),t(w(s)),t(L(l)),t(P()),e.next=23;break;case 22:t(V());case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(1),t(V());case 28:case"end":return e.stop()}}),e,null,[[1,25]])})));return function(t){return e.apply(this,arguments)}}())),function(){t({type:a.CLEAR_RACE_INFO})}}),[t,e]);var g=Object(s.useCallback)((function(e,n){p(!1);var c=parseInt(e.target.value);t(function(e,t){return{type:a.SET_BETS,payload:{place:e,participantId:t}}}(n,c))}),[t]),m=Object(s.useCallback)((function(){if(Object.values(o).some((function(e){return null===e}))||!parseInt(i))return p(!0);v(!0)}),[i,o]);return Object($.jsx)(G,{isLoading:l,isError:j,children:c&&r&&Object($.jsxs)($.Fragment,{children:[Object($.jsx)(ge,{children:Object($.jsxs)(me,{children:[Object($.jsx)(z.a,{variant:"h4",children:c.name}),Object($.jsx)(K,{isActive:c.active})]})}),Object($.jsx)(ve,{maxWidth:"lg",children:Object($.jsxs)(W.a,{container:!0,children:[Object($.jsxs)(W.a,{item:!0,xs:9,children:[Object($.jsx)(Y.a,{id:"bet",label:"Bet amount ($)",value:i,type:"number",onChange:function(e){p(!1),t(function(e){return{type:a.SET_BET_VALUE,payload:e}}(e.target.value))},inputProps:{inputMode:"numeric",pattern:"^[1-9][0-9]*$"},disabled:!(null===c||void 0===c?void 0:c.active),helperText:!(null===c||void 0===c?void 0:c.active)&&"Race is not active. You cannot place a bet."}),Object($.jsx)(ie,{race:c,participants:r,bets:o,handleChange:g})]}),Object($.jsx)(W.a,{item:!0,xs:3,children:Object($.jsx)(xe,{betValue:i,bets:o,participants:r,isActive:c.active,isValueError:h,isSubmitted:f,handleButtonClick:m})})]})})]})})},ye=n(207),Te=n(202),Ce=n(206),Se=n(198),Ae=Object(D.a)(ne.a)((function(e){return{"&:hover":{cursor:"pointer",backgroundColor:e.theme.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}})),_e=function(e){var t=e.races,n=Object(U.f)();return Object($.jsx)(ee.a,{component:ae.a,children:Object($.jsxs)(Q.a,{sx:{minWidth:400},"aria-label":"Races table",children:[Object($.jsx)(te.a,{children:Object($.jsxs)(ne.a,{children:[Object($.jsx)(Z.a,{children:"Race name"}),Object($.jsx)(Z.a,{align:"center",children:"Numer of participants"}),Object($.jsx)(Z.a,{align:"center",children:"Status"})]})}),Object($.jsx)(X.a,{children:t.map((function(e){var t=e.id,a=e.name,c=e.participants,r=e.active;return Object($.jsxs)(Ae,{onClick:function(){return function(e){n.push("/race/".concat(e))}(t)},children:[Object($.jsx)(Z.a,{component:"th",scope:"row",children:a}),Object($.jsx)(Z.a,{align:"center",children:c.length}),Object($.jsx)(Z.a,{align:"center",children:Object($.jsx)(K,{isActive:r})})]},t)}))})]})})},Re=Object(D.a)(B.a)((function(e){var t=e.theme;return{height:"100%",padding:"".concat(t.spacing(4)," 0")}})),ke=function(){var e=Object(b.b)(),t=Object(b.c)((function(e){return{status:e.status,filtredRaces:e.filtredRaces,isLoading:e.isLoading,isError:e.isError}})),n=t.status,c=t.filtredRaces,i=t.isLoading,o=t.isError;Object(s.useEffect)((function(){e(function(){var e=Object(I.a)(k.a.mark((function e(t){var n,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(F()),e.prev=1,e.next=4,fetch("https://my-json-server.typicode.com/hdjfye/bet-api/races");case 4:if(!(n=e.sent)){e.next=13;break}return e.next=8,n.json();case 8:c=e.sent,t((r=c,{type:a.SET_RACES,payload:r})),t(P()),e.next=14;break;case 13:t(V());case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),t(V());case 19:case"end":return e.stop()}var r}),e,null,[[1,16]])})));return function(t){return e.apply(this,arguments)}}())}),[e]);return Object($.jsx)(G,{isLoading:i,isError:o,children:Object($.jsxs)(Re,{maxWidth:"lg",children:[Object($.jsxs)(Ce.a,{fullWidth:!0,children:[Object($.jsx)(ye.a,{id:"status",children:"Race status"}),Object($.jsxs)(Se.a,{labelId:"status",id:"status",value:n,label:"Race status",onChange:function(t){e(function(e){return{type:a.SET_STATUS,payload:e}}(t.target.value))},children:[Object($.jsx)(Te.a,{value:r.Active,children:r.Active}),Object($.jsx)(Te.a,{value:r.Inactive,children:r.Inactive}),Object($.jsx)(Te.a,{value:r.Any,children:r.Any})]})]}),Object($.jsx)(_e,{races:c})]})})},Ie=n(28),we=n(103),Le=n(197),Fe=n(100),Pe=Object(we.a)({palette:{primary:{main:Le.a[500]},text:{secondary:Le.a[500]}}}),Ve=Object(Fe.a)(m||(m=Object(Ie.a)(["\nhtml {\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n}\nbody {\n    font-family: 'Roboto', sans-serif;\n    box-sizing: border-box;\n    font-weight: 400;\n    overflow-x: hidden;\n    margin: inherit;\n    padding: inherit;\n}\n*, *:before, *:after {\n  box-sizing: border-box;;\n}\np, a, ul, ol {\n  font-size: 16px;\n}\na {\n  text-decoration: none;\n  :hover {\n    text-decoration: none;\n  }\n}\n"]))),Ue=Object(D.a)(N.a)((function(e){var t=e.theme;return{position:"absolute",top:0,width:"100%",height:100,paddingLeft:t.spacing(2),display:"flex",justifyContent:"flex-start",alignItems:"center",backgroundColor:t.palette.primary.main}})),He=Object(D.a)(z.a)((function(e){return{color:e.theme.palette.common.white,fontWeight:500,letterSpacing:2}})),Be=function(){return Object($.jsx)(Ue,{children:Object($.jsx)(u.b,{to:"/",children:Object($.jsx)(He,{variant:"h2",children:"betME"})})})},Ne=Object(D.a)(N.a)({minHeight:"calc(100vh - 100px);",margin:"100px 0 40px 0"}),We=function(e){var t=e.children;return Object($.jsxs)(Ne,{children:[Object($.jsx)(Be,{}),t]})},ze=n(75),Ye=n(76),De=n(105),Me=n(104),$e=function(e){Object(De.a)(n,e);var t=Object(Me.a)(n);function n(e){var a;return Object(ze.a)(this,n),(a=t.call(this,e)).timeout=void 0,a.clearTimer=function(){a.timeout&&(clearTimeout(a.timeout),a.timeout=null)},a.navigateHome=function(){return window.location.replace("/")},a.timer=function(){return a.clearTimer(),a.timeout=setTimeout((function(){a.navigateHome()}),6e3)},a.timeout=null,a.state={hasError:!1},a}return Object(Ye.a)(n,[{key:"componentDidCatch",value:function(e){this.state.hasError&&this.timer(),console.error(e)}},{key:"componentWillUnmount",value:function(){this.clearTimer()}},{key:"render",value:function(){var e=this,t=this.state.hasError,n=this.props.children;return t?Object($.jsxs)(N.a,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:[Object($.jsx)(z.a,{variant:"h2",align:"center",children:"Oooops... something went not as expected. You'll be redirected to homepage shortly."}),Object($.jsx)(se.a,{onClick:function(){e.clearTimer(),e.navigateHome()},children:"Go to homepage"})]}):n}}],[{key:"getDerivedStateFromError",value:function(){return{hasError:!0}}}]),n}(s.Component),Je=function(){return Object($.jsxs)(H.a,{theme:Pe,children:[Object($.jsx)(Ve,{}),Object($.jsx)(We,{children:Object($.jsx)($e,{children:Object($.jsxs)(U.c,{children:[Object($.jsx)(U.a,{path:"/",exact:!0,children:Object($.jsx)(ke,{})}),Object($.jsx)(U.a,{path:"/race/:id",children:Object($.jsx)(Ee,{})})]})})})]})};j.a.render(Object($.jsx)(o.a.StrictMode,{children:Object($.jsx)(b.a,{store:S,children:Object($.jsx)(u.a,{children:Object($.jsx)(d.a,{persistor:A,children:Object($.jsx)(Je,{})})})})}),document.getElementById("root"))}},[[150,1,2]]]);
//# sourceMappingURL=main.5f09671d.chunk.js.map